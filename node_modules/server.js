var http=require("http");
var fs=require("fs");
var url=require("url");
var Client=require("mysql").Client;
var sqlClient=new Client();
var index=fs.readFileSync('./index.html');
var io=require('socket.io').listen(80000);
sqlClient.user="root";
sqlClient.password="";
sqlClient.query("USE gitHackers",function(error,results){
	if(error)
		{
				console.log("Couldn't select database "+error.message);
					return;
		}
	else
		console.log("Database connected");
});
var server=http.createServer(function(request,response){
	response.writeHead(200, {"Content-Type": "text/html"});
	response.write(index);
	console.log("Log after request");
	response.end();
});
server.listen(8888);
console.log("Node Server running");
io.sockets.on('connection', function (socket) {
  socket.emit('news', { hello: 'world' });
  socket.on('my other event', function (data) {
    console.log(data);
  });
});